# Документация: Скрипт увеличения изображений (Image Zoom Script)

## Описание

Скрипт `image_zoom_script.js` предназначен для добавления функциональности увеличения изображений при клике в компоненте `node widget-markdown widget mark111 css39` на вашем сайте.

## Функциональность

✅ **Полноэкранный просмотр изображений** - клик на изображение открывает его в модальном окне  
✅ **Плавные анимации** - fadeIn/fadeOut и zoomIn/zoomOut эффекты  
✅ **Несколько способов закрытия**:
- Клик на крестик (×)
- Клик вне изображения
- Нажатие клавиши Escape
- На мобильных: свайп или клик вне изображения

✅ **Адаптивный дизайн** - оптимизирован для мобильных устройств  
✅ **Автоматическая инициализация** - работает при загрузке страницы  

## Установка

### Способ 1: Добавление скрипта в HTML (рекомендуется)

Добавьте следующую строку перед закрывающим тегом `</body>`:

```html
<script src="/path/to/image_zoom_script.js"></script>
```

Пример полного добавления в ваш HTML:

```html
<!DOCTYPE html>
<html lang="ru">
<head>
    <!-- Ваши стили и мета-теги -->
</head>
<body>
    <!-- Ваш контент -->
    
    <!-- Добавьте скрипт перед закрывающим тегом body -->
    <script src="image_zoom_script.js"></script>
</body>
</html>
```

### Способ 2: Встроенное добавление скрипта

Если вы не можете добавить внешний файл, вставьте содержимое скрипта прямо в HTML:

```html
<script>
    // Содержимое image_zoom_script.js
</script>
```

## Как это работает

### Структура компонента

Скрипт ищет контейнер с селектором `.mark111 .root` и находит все изображения внутри тегов `<p>`:

```html
<div class="node widget-markdown widget mark111 css39">
    <div class="metahtml css61">
        <div cr-html="" class="root">
            <p>
                <img src="image1.jpg" alt="Описание">
            </p>
            <p>
                <img src="image2.jpg" alt="Описание">
            </p>
        </div>
    </div>
</div>
```

### Процесс инициализации

1. Скрипт ждет загрузки DOM
2. Находит контейнер `.mark111 .root`
3. Создает модальное окно для увеличения
4. Добавляет обработчики событий для каждого изображения
5. Выводит в консоль количество инициализированных изображений

## Использование

### Для пользователей

1. **Открытие изображения**: Нажмите на любое изображение в компоненте
2. **Закрытие**: 
   - Нажмите на крестик (×) в верхнем правом углу
   - Нажмите вне изображения
   - Нажмите клавишу Escape
   - На мобильном: коснитесь вне изображения

### Для разработчиков

#### Изменение селектора контейнера

Если ваш контейнер имеет другой класс, измените строку в скрипте:

```javascript
// Текущий селектор
const markdownContainer = document.querySelector('.mark111 .root');

// Измените на ваш селектор, например:
const markdownContainer = document.querySelector('.your-class .root');
```

#### Изменение стилей модального окна

Отредактируйте функцию `getModalStyles()` для изменения внешнего вида:

```javascript
function getModalStyles() {
    return `
        .zoom-modal {
            background-color: rgba(0, 0, 0, 0.85); /* Измените прозрачность */
            /* ... другие стили ... */
        }
    `;
}
```

#### Добавление дополнительных функций

Вы можете расширить скрипт, добавив:

```javascript
// Пример: добавление кнопок навигации между изображениями
function addNavigationButtons(modal) {
    // Ваш код здесь
}
```

## Примеры кастомизации

### Изменение цвета фона модального окна

```javascript
// В функции getModalStyles(), найдите:
background-color: rgba(0, 0, 0, 0.85);

// Измените на:
background-color: rgba(0, 0, 0, 0.95); // Более темный
// или
background-color: rgba(0, 0, 0, 0.7);  // Более светлый
```

### Изменение скорости анимации

```javascript
// Найдите в стилях:
animation: fadeIn 0.3s ease;

// Измените на:
animation: fadeIn 0.5s ease; // Медленнее
// или
animation: fadeIn 0.1s ease; // Быстрее
```

### Добавление граница к изображению

```javascript
// В getModalStyles(), найдите:
.zoom-modal-content img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    border-radius: 8px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
}

// Добавьте:
border: 3px solid white;
```

## Совместимость

- ✅ Chrome/Edge (последние версии)
- ✅ Firefox (последние версии)
- ✅ Safari (последние версии)
- ✅ Mobile browsers (iOS Safari, Chrome Mobile)
- ✅ IE 11+ (с полифилами)

## Отладка

### Проверка инициализации

Откройте консоль браузера (F12) и проверьте сообщения:

```
Инициализирован zoom для 3 изображений
```

### Если скрипт не работает

1. **Проверьте консоль на ошибки** (F12 → Console)
2. **Убедитесь, что контейнер существует**:
   ```javascript
   console.log(document.querySelector('.mark111 .root'));
   ```
3. **Проверьте наличие изображений**:
   ```javascript
   console.log(document.querySelectorAll('.mark111 .root p img'));
   ```
4. **Проверьте путь к скрипту** - убедитесь, что файл находится в правильной директории

## Производительность

- Скрипт использует делегирование событий для оптимальной производительности
- Модальное окно создается один раз при инициализации
- Минимальное использование памяти

## Безопасность

- Скрипт не отправляет данные на внешние серверы
- Не использует eval() или другие опасные функции
- Безопасен для использования на публичных сайтах

## Лицензия

Скрипт предоставляется как есть для использования на вашем сайте.

## Поддержка

Если у вас возникли проблемы:

1. Проверьте консоль браузера на ошибки
2. Убедитесь, что скрипт загружается (вкладка Network в DevTools)
3. Проверьте селектор контейнера в вашем HTML
4. Попробуйте очистить кэш браузера (Ctrl+Shift+Delete)

## История версий

### v1.0 (2026-01-27)
- Первая версия скрипта
- Базовая функциональность увеличения изображений
- Поддержка мобильных устройств
- Плавные анимации

#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –∏–≥—Ä—ã "–ú–æ—Ä—Å–∫–æ–π –±–æ–π"
–ó–¥–µ—Å—å –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–≥—Ä—ã
"""

# ============================================================================
# –ü–ê–†–ê–ú–ï–¢–†–´ –ò–ì–†–û–í–û–ì–û –ü–û–õ–Ø
# ============================================================================

# –†–∞–∑–º–µ—Ä –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è (NxN)
BOARD_SIZE = 6

# –†–∞–∑–º–µ—Ä—ã –∫–æ—Ä–∞–±–ª–µ–π [—Ä–∞–∑–º–µ—Ä1, —Ä–∞–∑–º–µ—Ä2, ...]
# –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: 1 –∫–æ—Ä–∞–±–ª—å 3x1, 2 –∫–æ—Ä–∞–±–ª—è 2x1, 3 –∫–æ—Ä–∞–±–ª—è 1x1
SHIP_SIZES = [3, 2, 2, 1, 1, 1]

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –∫–æ—Ä–∞–±–ª—è
MAX_PLACEMENT_ATTEMPTS = 100

# ============================================================================
# –ü–ê–†–ê–ú–ï–¢–†–´ AI –ö–û–ú–ü–¨–Æ–¢–ï–†–ê
# ============================================================================

# –¢–∏–ø AI –∫–æ–º–ø—å—é—Ç–µ—Ä–∞: "random" (—Å–ª—É—á–∞–π–Ω—ã–µ –≤—ã—Å—Ç—Ä–µ–ª—ã)
# –í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å: "smart" (–¥–æ–±–∏–≤–∞–Ω–∏–µ –ø–æ–¥–±–∏—Ç—ã—Ö –∫–æ—Ä–∞–±–ª–µ–π)
AI_TYPE = "random"

# ============================================================================
# –ü–ê–†–ê–ú–ï–¢–†–´ –ò–ù–¢–ï–†–§–ï–ô–°–ê
# ============================================================================

# –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞ –ø–æ–ª—è—Ö
SHOW_COORDINATES = True

# –°–∏–º–≤–æ–ª—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
SYMBOLS = {
    "ship": "‚ñ†",           # –ö–æ—Ä–∞–±–ª—å
    "hit": "X",            # –ü–æ–ø–∞–¥–∞–Ω–∏–µ
    "miss": "‚Ä¢",           # –ü—Ä–æ–º–∞—Ö
    "unknown": "~",        # –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–ª–µ—Ç–∫–∞
    "empty": " ",          # –ü—É—Å—Ç–∞—è –∫–ª–µ—Ç–∫–∞
}

# –°–æ–æ–±—â–µ–Ω–∏—è –∏–≥—Ä—ã
MESSAGES = {
    "welcome": "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É '–ú–æ—Ä—Å–∫–æ–π –±–æ–π'!",
    "placing_ships": "–†–∞—Å—Å—Ç–∞–≤–ª—è—é –∫–æ—Ä–∞–±–ª–∏...",
    "ships_placed": "–ö–æ—Ä–∞–±–ª–∏ —Ä–∞—Å—Å—Ç–∞–≤–ª–µ–Ω—ã!",
    "your_field": "–í–∞—à–µ –ø–æ–ª–µ:",
    "enemy_field": "–ü–æ–ª–µ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞:",
    "input_format": "–í–≤–µ–¥–∏—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ: –±—É–∫–≤–∞ (A-F) + —Ü–∏—Ñ—Ä–∞ (1-6)",
    "input_examples": "–ü—Ä–∏–º–µ—Ä—ã: A1, C4, F6",
    "game_status": "–°–¢–ê–¢–£–° –ò–ì–†–´",
    "your_ships": "–í–∞—à–∏ –∫–æ—Ä–∞–±–ª–∏:",
    "enemy_ships": "–ö–æ—Ä–∞–±–ª–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞:",
    "your_turn": "–í–ê–® –•–û–î",
    "computer_turn": "–•–û–î –ö–û–ú–ü–¨–Æ–¢–ï–†–ê",
    "enter_coordinates": "–í–≤–µ–¥–∏—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤—ã—Å—Ç—Ä–µ–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, A1): ",
    "hit": "–ü–æ–ø–∞–¥–∞–Ω–∏–µ!",
    "sunk": "–ü–æ–ø–∞–¥–∞–Ω–∏–µ! –ö–æ—Ä–∞–±–ª—å –ø–æ—Ç–æ–ø–ª–µ–Ω!",
    "miss": "–ü—Ä–æ–º–∞—Ö!",
    "already_shot": "–í—ã —É–∂–µ —Å—Ç—Ä–µ–ª—è–ª–∏ –≤ —ç—Ç—É –∫–ª–µ—Ç–∫—É!",
    "invalid_input": "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–≤–æ–¥! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç: –±—É–∫–≤–∞ (A-F) + —Ü–∏—Ñ—Ä–∞ (1-6)",
    "extra_turn": "–í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ö–æ–¥!",
    "computer_extra_turn": "–ö–æ–º–ø—å—é—Ç–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ö–æ–¥!",
    "press_enter": "–ù–∞–∂–º–∏—Ç–µ Enter –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è...",
    "game_over": "–ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê!",
    "player_won": "üéâ –ü–û–ó–î–†–ê–í–õ–Ø–ï–ú! –í–´ –ü–û–ë–ï–î–ò–õ–ò! üéâ",
    "player_won_message": "–í—ã –ø–æ—Ç–æ–ø–∏–ª–∏ –≤—Å–µ –∫–æ—Ä–∞–±–ª–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞!",
    "computer_won": "üíÄ –í–ê–ú–ò –ü–û–ë–ï–ñ–î–ï–ù –ö–û–ú–ü–¨–Æ–¢–ï–† üíÄ",
    "computer_won_message": "–ö–æ–º–ø—å—é—Ç–µ—Ä –ø–æ—Ç–æ–ø–∏–ª –≤—Å–µ –≤–∞—à–∏ –∫–æ—Ä–∞–±–ª–∏.",
    "final_enemy_field": "–ü–æ–ª–µ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ (—Ñ–∏–Ω–∞–ª—å–Ω–æ–µ):",
    "final_your_field": "–í–∞—à–µ –ø–æ–ª–µ (—Ñ–∏–Ω–∞–ª—å–Ω–æ–µ):",
    "game_interrupted": "–ò–≥—Ä–∞ –ø—Ä–µ—Ä–≤–∞–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.",
    "error": "–û—à–∏–±–∫–∞:",
}

# ============================================================================
# –ü–ê–†–ê–ú–ï–¢–†–´ –û–¢–õ–ê–î–ö–ò
# ============================================================================

# –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –∫–æ—Ä–∞–±–ª–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
DEBUG_SHOW_ENEMY_SHIPS = False

# –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
DEBUG_VERBOSE = False

# ============================================================================
# –§–£–ù–ö–¶–ò–ò –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò
# ============================================================================

def get_board_size():
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è"""
    return BOARD_SIZE


def get_ship_sizes():
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ä–∞–∑–º–µ—Ä–æ–≤ –∫–æ—Ä–∞–±–ª–µ–π"""
    return SHIP_SIZES.copy()


def get_total_ship_cells():
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–µ—Ç–æ–∫, –∑–∞–Ω–∏–º–∞–µ–º—ã—Ö –∫–æ—Ä–∞–±–ª—è–º–∏"""
    return sum(SHIP_SIZES)


def get_ship_count():
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ—Ä–∞–±–ª–µ–π"""
    return len(SHIP_SIZES)


def get_message(key, default=""):
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ –∫–ª—é—á—É
    
    Args:
        key: –∫–ª—é—á —Å–æ–æ–±—â–µ–Ω–∏—è
        default: –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω
        
    Returns:
        –°–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    """
    return MESSAGES.get(key, default)


def get_symbol(key, default=""):
    """
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–∏–º–≤–æ–ª –ø–æ –∫–ª—é—á—É
    
    Args:
        key: –∫–ª—é—á —Å–∏–º–≤–æ–ª–∞
        default: –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω
        
    Returns:
        –°–∏–º–≤–æ–ª –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    """
    return SYMBOLS.get(key, default)


# ============================================================================
# –í–ê–õ–ò–î–ê–¶–ò–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò
# ============================================================================

def validate_config():
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"""
    errors = []
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–ª—è
    if BOARD_SIZE < 3:
        errors.append("BOARD_SIZE –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 3")
    if BOARD_SIZE > 26:
        errors.append("BOARD_SIZE –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –±–æ–ª–µ–µ 26")
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ –∫–æ—Ä–∞–±–ª–µ–π
    if not SHIP_SIZES:
        errors.append("SHIP_SIZES –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
    
    for size in SHIP_SIZES:
        if size < 1:
            errors.append(f"–†–∞–∑–º–µ—Ä –∫–æ—Ä–∞–±–ª—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 1, –ø–æ–ª—É—á–µ–Ω–æ: {size}")
        if size > BOARD_SIZE:
            errors.append(f"–†–∞–∑–º–µ—Ä –∫–æ—Ä–∞–±–ª—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–ª—è: {size} > {BOARD_SIZE}")
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–ª–µ—Ç–æ–∫
    total_cells = get_total_ship_cells()
    max_cells = BOARD_SIZE * BOARD_SIZE
    if total_cells > max_cells:
        errors.append(f"–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–µ—Ç–æ–∫ –∫–æ—Ä–∞–±–ª–µ–π ({total_cells}) –ø—Ä–µ–≤—ã—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–æ–ª—è ({max_cells})")
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ AI
    if AI_TYPE not in ["random", "smart"]:
        errors.append(f"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø AI: {AI_TYPE}")
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ø—ã—Ç–æ–∫
    if MAX_PLACEMENT_ATTEMPTS < 1:
        errors.append("MAX_PLACEMENT_ATTEMPTS –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 1")
    
    if errors:
        print("‚ö†Ô∏è  –û–®–ò–ë–ö–ò –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò:")
        for error in errors:
            print(f"  - {error}")
        return False
    
    return True


if __name__ == "__main__":
    print("–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏...")
    if validate_config():
        print("‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞!")
        print(f"\n–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–≥—Ä—ã:")
        print(f"  –†–∞–∑–º–µ—Ä –ø–æ–ª—è: {BOARD_SIZE}x{BOARD_SIZE}")
        print(f"  –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ—Ä–∞–±–ª–µ–π: {get_ship_count()}")
        print(f"  –†–∞–∑–º–µ—Ä—ã –∫–æ—Ä–∞–±–ª–µ–π: {SHIP_SIZES}")
        print(f"  –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–µ—Ç–æ–∫: {get_total_ship_cells()}")
        print(f"  –¢–∏–ø AI: {AI_TYPE}")
    else:
        print("‚ùå –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫–∏!")
